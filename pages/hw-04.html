<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../css/single.main.min.css" />
        <title>第四週．函式設計與陣列操作</title>
    </head>
    <body></body>
    <script>
        const bmiStatesData = {
            overThin: {
                state: "過輕",
                color: "藍色",
            },
            normal: {
                state: "正常",
                color: "紅色",
            },
            overWeight: {
                state: "過重",
                color: "澄色",
            },
            mildFat: {
                state: "輕度肥胖",
                color: "黃色",
            },
            moderateFat: {
                state: "中度肥胖",
                color: "黑色",
            },
            severeFat: {
                state: "重度肥胖",
                color: "綠色",
            },
        };

        let re = /^\d/;
        let bmi;
        let bmiHistoryData = [];

        function printBmi(h, w) {
            if (re.test(h) && re.test(w)) {
                let weight = w,
                    height = Math.pow(h / 100, 2);
                bmi = (weight / height).toFixed(2);
                //console.log(bmi);
                if (bmi < 18.5) {
                    showHint("overThin");
                } else if (bmi >= 18.5 && bmi < 24) {
                    showHint("normal");
                } else if (24 <= bmi && bmi < 27) {
                    showHint("overWeight");
                } else if (27 <= bmi && bmi < 30) {
                    showHint("mildFat");
                } else if (30 <= bmi && bmi < 35) {
                    showHint("moderateFat");
                } else {
                    showHint("severeFat");
                }
            } else {
                console.log("您的數值輸入錯誤，請重新輸入");
            }
        }

        function showHint(txt) {
            console.log(`您的體重為${bmiStatesData[txt].state}，健康指數為${bmiStatesData[txt].color}`);
            stateData = bmiStatesData[txt].state;
            colorData = bmiStatesData[txt].color;
            bmiHistoryData.push({ bmi, stateData, colorData });
        }

        function showHistoryData() {
            let idx = bmiHistoryData.length,
                lastData = bmiHistoryData[idx - 1];
            console.log(`您總共計算 ${idx} 次 BMI 紀錄，最後一次 BMI 指數為 ${lastData.bmi}，體重為${lastData.stateData}！健康指數為${lastData.colorData}！`);
        }

        printBmi(178, 20);
        printBmi(178, 70);
        printBmi(178, 85);
        printBmi(178, 90);
        printBmi(178, 110);
        printBmi(178, 130);
        printBmi("身高", "體重");
        showHistoryData();
    </script>
</html>
